<script>
  const feedURL = "https://medium.com/feed/@jackgreencrypto";
  const api = "https://api.rss2json.com/v1/api.json?rss_url=" + encodeURIComponent(feedURL);

  fetch(api)
    .then(res => res.json())
    .then(data => {
      const items = data.items.slice(0, 3);
      const container = document.getElementById("mediumRepeater");
      container.innerHTML = "";

      items.forEach(item => {
        const title = item.title;
        const link = item.link;
        const rawDesc = item.description;
        const desc = rawDesc.replace(/<[^>]*>/g, '').slice(0, 180) + "...";

        // Extract image from description HTML
        const tempDiv = document.createElement("div");
        tempDiv.innerHTML = rawDesc;
        const firstImg = tempDiv.querySelector("img");
        const image = firstImg ? firstImg.src : "";

        const card = document.createElement("div");
        card.className = "article-card";
        card.innerHTML = `
          ${image ? `<img src="${image}" alt="Thumbnail">` : ""}
          <h3>${title}</h3>
          <p>${desc}</p>
          <a href="${link}" target="_blank" rel="noopener">Read More</a>
        `;
        container.appendChild(card);
      });
    })
    .catch(err => {
      document.getElementById("mediumRepeater").innerHTML = "<p>Failed to load articles.</p>";
      console.error("RSS2JSON error:", err);
    });
</script>
